{"version":3,"file":"is-file-inside-compilations.js","names":["filesInsideDevelopHtmlCompilation","Set","removeQueryParams","path","split","setFilesFromDevelopHtmlCompilation","developHtmlCompilation","clear","module","modules","NormalModule","resource","add","isFileInsideCompilations","absolutePath","developBrowserCompilation","has"],"sources":["../../../../src/utils/webpack/utils/is-file-inside-compilations.ts"],"sourcesContent":["import { Compilation, NormalModule } from \"webpack\"\n\nconst filesInsideDevelopHtmlCompilation = new Set<string>()\n\nfunction removeQueryParams(path: string): string {\n  return path.split(`?`)[0]\n}\n\nexport function setFilesFromDevelopHtmlCompilation(\n  developHtmlCompilation: Compilation\n): void {\n  filesInsideDevelopHtmlCompilation.clear()\n\n  for (const module of developHtmlCompilation.modules) {\n    if (module instanceof NormalModule && module.resource) {\n      filesInsideDevelopHtmlCompilation.add(removeQueryParams(module.resource))\n    }\n  }\n}\n\n/**\n * Checks if a file is inside either `develop` or `develop-html` compilation. Used to determine if\n * we should generate codeframe for this file for error overlay.\n */\nexport function isFileInsideCompilations(\n  absolutePath: string,\n  developBrowserCompilation: Compilation\n): boolean {\n  if (filesInsideDevelopHtmlCompilation.has(absolutePath)) {\n    return true\n  }\n\n  for (const module of developBrowserCompilation.modules) {\n    if (module instanceof NormalModule && module.resource) {\n      if (absolutePath === removeQueryParams(module.resource)) {\n        return true\n      }\n    }\n  }\n\n  return false\n}\n"],"mappings":";;;;;;AAAA;;AAEA,MAAMA,iCAAiC,GAAG,IAAIC,GAAJ,EAA1C;;AAEA,SAASC,iBAAT,CAA2BC,IAA3B,EAAiD;EAC/C,OAAOA,IAAI,CAACC,KAAL,CAAY,GAAZ,EAAgB,CAAhB,CAAP;AACD;;AAEM,SAASC,kCAAT,CACLC,sBADK,EAEC;EACNN,iCAAiC,CAACO,KAAlC;;EAEA,KAAK,MAAMC,MAAX,IAAqBF,sBAAsB,CAACG,OAA5C,EAAqD;IACnD,IAAID,MAAM,YAAYE,qBAAlB,IAAkCF,MAAM,CAACG,QAA7C,EAAuD;MACrDX,iCAAiC,CAACY,GAAlC,CAAsCV,iBAAiB,CAACM,MAAM,CAACG,QAAR,CAAvD;IACD;EACF;AACF;AAED;AACA;AACA;AACA;;;AACO,SAASE,wBAAT,CACLC,YADK,EAELC,yBAFK,EAGI;EACT,IAAIf,iCAAiC,CAACgB,GAAlC,CAAsCF,YAAtC,CAAJ,EAAyD;IACvD,OAAO,IAAP;EACD;;EAED,KAAK,MAAMN,MAAX,IAAqBO,yBAAyB,CAACN,OAA/C,EAAwD;IACtD,IAAID,MAAM,YAAYE,qBAAlB,IAAkCF,MAAM,CAACG,QAA7C,EAAuD;MACrD,IAAIG,YAAY,KAAKZ,iBAAiB,CAACM,MAAM,CAACG,QAAR,CAAtC,EAAyD;QACvD,OAAO,IAAP;MACD;IACF;EACF;;EAED,OAAO,KAAP;AACD"}