{"version":3,"file":"require-gatsby-plugin.js","names":["pluginModuleCache","Map","setGatsbyPluginCache","plugin","module","moduleObject","key","name","set","additionalPrefix","importKey","resolve","requireGatsbyPlugin","pluginModule","get","require","resolvedCompiledGatsbyNode"],"sources":["../../src/utils/require-gatsby-plugin.ts"],"sourcesContent":["const pluginModuleCache = new Map<string, any>()\n\nexport function setGatsbyPluginCache(\n  plugin: { name: string; resolve: string; importKey?: string },\n  module: string,\n  moduleObject: any\n): void {\n  const key = `${plugin.name}/${module}`\n  pluginModuleCache.set(key, moduleObject)\n\n  const additionalPrefix = plugin.importKey || plugin.resolve\n  if (additionalPrefix) {\n    const key = `${additionalPrefix}/${module}`\n    pluginModuleCache.set(key, moduleObject)\n  }\n}\n\nexport function requireGatsbyPlugin(\n  plugin: {\n    name: string\n    resolve: string\n    resolvedCompiledGatsbyNode?: string\n    importKey?: string\n  },\n  module: string\n): any {\n  const key = `${plugin.importKey || plugin.resolve || plugin.name}/${module}`\n\n  let pluginModule = pluginModuleCache.get(key)\n  if (!pluginModule) {\n    pluginModule = require(module === `gatsby-node` &&\n      plugin.resolvedCompiledGatsbyNode\n      ? plugin.resolvedCompiledGatsbyNode\n      : `${plugin.resolve}/${module}`)\n    pluginModuleCache.set(key, pluginModule)\n  }\n  return pluginModule\n}\n"],"mappings":";;;;;AAAA,MAAMA,iBAAiB,GAAG,IAAIC,GAAJ,EAA1B;;AAEO,SAASC,oBAAT,CACLC,MADK,EAELC,MAFK,EAGLC,YAHK,EAIC;EACN,MAAMC,GAAG,GAAI,GAAEH,MAAM,CAACI,IAAK,IAAGH,MAAO,EAArC;EACAJ,iBAAiB,CAACQ,GAAlB,CAAsBF,GAAtB,EAA2BD,YAA3B;EAEA,MAAMI,gBAAgB,GAAGN,MAAM,CAACO,SAAP,IAAoBP,MAAM,CAACQ,OAApD;;EACA,IAAIF,gBAAJ,EAAsB;IACpB,MAAMH,GAAG,GAAI,GAAEG,gBAAiB,IAAGL,MAAO,EAA1C;IACAJ,iBAAiB,CAACQ,GAAlB,CAAsBF,GAAtB,EAA2BD,YAA3B;EACD;AACF;;AAEM,SAASO,mBAAT,CACLT,MADK,EAOLC,MAPK,EAQA;EACL,MAAME,GAAG,GAAI,GAAEH,MAAM,CAACO,SAAP,IAAoBP,MAAM,CAACQ,OAA3B,IAAsCR,MAAM,CAACI,IAAK,IAAGH,MAAO,EAA3E;EAEA,IAAIS,YAAY,GAAGb,iBAAiB,CAACc,GAAlB,CAAsBR,GAAtB,CAAnB;;EACA,IAAI,CAACO,YAAL,EAAmB;IACjBA,YAAY,GAAGE,OAAO,CAACX,MAAM,KAAM,aAAZ,IACrBD,MAAM,CAACa,0BADc,GAEnBb,MAAM,CAACa,0BAFY,GAGlB,GAAEb,MAAM,CAACQ,OAAQ,IAAGP,MAAO,EAHV,CAAtB;IAIAJ,iBAAiB,CAACQ,GAAlB,CAAsBF,GAAtB,EAA2BO,YAA3B;EACD;;EACD,OAAOA,YAAP;AACD"}